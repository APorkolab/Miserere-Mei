<div class="row">
	<div class="col-12 d-flex justify-content-center text-center">
		<div class="card">
			<div class="card-header card-header-primary">
				<h4 class="card-title" *ngIf="user$ | async">Edit the data of the user</h4>
				<h4 class="card-title" *ngIf="!(user$ | async)">Add a new user</h4>
			</div>
			<div class="card-body">
				<form #userForm="ngForm">
					<input type="hidden" name="id" [(ngModel)]="user._id">

					<h3 class="h5 text-secondary">First name *</h3>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="text" class="form-control" name="firstName" [(ngModel)]="user.firstName" required
									pattern="^[a-űA-Űa-zA-Z \-\.,!()']{3,60}$">
							</div>
							<div *ngIf="userForm.controls['firstName'].invalid && userForm.controls['firstName'].touched"
								class="alert alert-danger" role="alert">
								The first name of the user must be at least 3 letters and must not contain numbers!
							</div>
						</div>
					</div>

					<h3 class="h5 text-secondary">Last name *</h3>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="text" class="form-control" name="lastName" [(ngModel)]="user.lastName" required
									pattern="^[a-űA-Űa-zA-Z \-\.,!()']{3,60}$">
							</div>
							<div *ngIf="userForm.controls['lastName'].invalid && userForm.controls['lastName'].touched"
								class="alert alert-danger" role="alert">
								The last name of the user must be at least 3 letters and must not contain numbers!
							</div>
						</div>
					</div>

					<h3 class="h5 text-secondary">E-mail *</h3>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="email" class="form-control" name="email" [(ngModel)]="user.email" required>
							</div>
							<div *ngIf="userForm.controls['email'].invalid && userForm.controls['email'].touched"
								class="alert alert-danger" role="alert">
								The email of the user must be valid and unique!
							</div>
						</div>
					</div>

					<h3 class="h5 text-secondary">Role *</h3>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="number" class="form-control" name="role" [(ngModel)]="user.role" required min="1" max="3">
							</div>
							<div *ngIf="userForm.controls['role'].invalid && userForm.controls['role'].touched"
								class="alert alert-danger" role="alert">
								The role number of the user must be 1 (viewer), 2 (archiver), or 3 (administrator)!
							</div>
						</div>
					</div>

					<h3 class="h5 text-secondary">Password *</h3>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<input type="password" class="form-control" name="password" [(ngModel)]="user.password" required
									pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{7,}$">
							</div>
							<div *ngIf="userForm.controls['password'].invalid && userForm.controls['password'].touched"
								class="alert alert-danger" role="alert">
								The password must be at least 7 characters long and contain at least 1 letter and 1 number!
							</div>
						</div>
					</div>

					<button *ngIf="user$ | async" (click)="onUpdate(user)" [disabled]="userForm.invalid" type="submit"
						class="btn btn-primary pull-right me-md-3">Update data of user</button>
					<button *ngIf="!(user$ | async)" (click)="onCreate(user)" [disabled]="userForm.invalid" type="submit"
						class="btn btn-primary pull-right me-md-3">Create data of user</button>
					<button routerLink="/users" type="button" class="btn btn-danger pull-left">Cancel edit</button>
					<div class="clearfix"></div>
				</form>
			</div>
		</div>
	</div>
</div>